/*
 ESP8266 - Ejemplo de uso de pantalla OLED 128x64 monocroma por Dani No www.esploradores.com
 
 Este ejemplo utiliza el núcleo de la librería gráfica de Adafruit GFX y 
 la librería SSD1306 específica para pantallas monocromas 128x64 y 128x32.
 Estas librerías deben estar instaladas para su funcionamiento.
 Para instalarlas se debe seleccionar:
   -Programa -> Incluir librería -> Gestionar Librerías -> Adafruit GFX Library
   -Programa -> Incluir librería -> Gestionar Librerías -> Adafruit SSD1306
 
 Cuando se instala la librería SSD1306 está configurada por defecto para pantallas 128x32.
 Al utilizarla para una pantalla 128x64 es preciso reconfigurarla.
 Para hacerlo debe abrir el fichero Adafruit_SSD1306.h con un editor y 
 descomentar la línea 69 (// #define SSD1306_128_64  --->  #define SSD1306_128_64) y 
 comentar la línea 70 (#define SSD1306_128_32  --->  //#define SSD1306_128_32).
 Así mismo se debe verificar en la línea 51 que la dirección de I2C de la pantalla es correcta 
 (#define SSD1306_I2C_ADDRESS   0x3C  // 128x64 0x3D (default) or 0x3C (if SA0 is grounded))
 
Por último, también se debe verificar que en la línea 108 de este sketch
la dirección I2C de la pantalla también es correcta.
 */
 
#include <SPI.h>
#include <Wire.h>
#include <Adafruit_GFX.h>      //Nucleo de la librería gráfica.
#include <Adafruit_SSD1306.h>  //Librería para pantallas OLED monocromas de 128x64 y 128x32
#include <Fonts/FreeMonoBoldOblique12pt7b.h>
#include <Fonts/FreeSansBoldOblique12pt7b.h>
 
#define OLED_RESET 0 
Adafruit_SSD1306 display(OLED_RESET);
 
#define NUMFLAKES 10
#define XPOS 0
#define YPOS 1
#define DELTAY 2
 
const unsigned char Toro [] PROGMEM = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xff, 0xff, 0xff, 0xff, 0xff, 0xe0, 0xff, 0xf0, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0x00, 0x00, 
0x00, 0x70, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x80, 0x00, 
0x00, 0x18, 0x00, 0x00, 0x00, 0x1c, 0x7f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc0, 0x00, 
0x00, 0x18, 0x00, 0x00, 0x00, 0x7d, 0xbf, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc0, 0x00, 
0x00, 0x18, 0x00, 0x00, 0x00, 0xfd, 0xbf, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xe0, 0x00, 
0x00, 0x1c, 0x00, 0x00, 0x00, 0xfd, 0xdf, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xe0, 0x00, 
0x00, 0x1c, 0x00, 0x00, 0x07, 0xfd, 0xdf, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00, 
0x00, 0x1c, 0x00, 0x00, 0x0f, 0xfd, 0xdf, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00, 
0x00, 0x1c, 0x00, 0x00, 0x0f, 0xff, 0xef, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf4, 0x00, 
0x00, 0x1e, 0x00, 0x00, 0x3f, 0xff, 0xef, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf7, 0xc0, 
0x00, 0x1e, 0x00, 0x00, 0x3f, 0xfb, 0xef, 0xff, 0xf3, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf7, 0xf8, 
0x00, 0x1e, 0x00, 0x00, 0xff, 0xfb, 0xef, 0xff, 0xfb, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf7, 0xfc, 
0x00, 0x1f, 0xe1, 0xfe, 0x7f, 0xfb, 0xef, 0xff, 0xfd, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf7, 0xc4, 
0x00, 0x1f, 0xff, 0xff, 0xbf, 0xfb, 0xef, 0xff, 0xfd, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x7c, 
0x00, 0x1f, 0xff, 0xff, 0xc7, 0xf7, 0xef, 0xff, 0xfe, 0xff, 0xff, 0xff, 0xbf, 0xff, 0xf7, 0xe4, 
0x00, 0x0f, 0xff, 0xff, 0xf9, 0xe7, 0xef, 0xff, 0xfe, 0xff, 0xff, 0xff, 0xbf, 0xff, 0xf7, 0xfc, 
0x00, 0x07, 0xff, 0xff, 0xfc, 0x1f, 0xdf, 0xff, 0xfe, 0xff, 0xff, 0xff, 0xbf, 0xff, 0xef, 0xdc, 
0x00, 0x03, 0xbf, 0xff, 0xfb, 0xff, 0xc7, 0xff, 0xff, 0x7f, 0xff, 0xff, 0xbf, 0xff, 0xef, 0xbc, 
0x00, 0x01, 0xbf, 0xff, 0xff, 0xff, 0xb7, 0xff, 0xff, 0x7f, 0xff, 0xff, 0xbf, 0xff, 0xef, 0x3c, 
0x00, 0x00, 0x3f, 0xff, 0xff, 0xfe, 0x77, 0xff, 0xff, 0x7f, 0xff, 0xff, 0xbf, 0xff, 0xef, 0x3c, 
0x00, 0x01, 0xff, 0xff, 0xff, 0xfd, 0xf7, 0xff, 0xff, 0x7f, 0xff, 0xff, 0xbf, 0xff, 0xef, 0x3c, 
0x00, 0x03, 0xff, 0xff, 0xff, 0xfb, 0xef, 0xff, 0xff, 0x7f, 0xff, 0xff, 0x7f, 0xff, 0xf7, 0x3c, 
0x00, 0x03, 0xff, 0xff, 0xff, 0xe7, 0xcf, 0xff, 0xff, 0x7f, 0xff, 0xff, 0x7f, 0xff, 0xf7, 0x3c, 
0x00, 0x03, 0xff, 0xff, 0xff, 0x1f, 0xdf, 0xff, 0xff, 0x7f, 0xff, 0xff, 0x7f, 0xff, 0xf7, 0xbc, 
0x00, 0x03, 0xff, 0xff, 0xff, 0xff, 0x9f, 0xff, 0xff, 0x7f, 0xff, 0xff, 0x7f, 0xff, 0xe3, 0xdc, 
0x00, 0x03, 0xff, 0xff, 0xff, 0xfe, 0x3f, 0xfc, 0xff, 0x7f, 0xff, 0xfe, 0xff, 0xff, 0xe1, 0xe4, 
0x00, 0x03, 0xff, 0xfc, 0xff, 0x8c, 0x7f, 0xf1, 0x3f, 0x7f, 0xff, 0xfe, 0xff, 0xff, 0xc1, 0xfc, 
0x00, 0x01, 0xff, 0xf0, 0xff, 0x81, 0xff, 0xff, 0xcf, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc0, 0xfe, 
0x00, 0x01, 0xff, 0xf3, 0xff, 0x9f, 0xff, 0xff, 0xcf, 0xff, 0xff, 0xef, 0xff, 0xff, 0x80, 0x7e, 
0x00, 0x03, 0xff, 0xff, 0xff, 0x9f, 0xff, 0xff, 0xf6, 0xff, 0xff, 0xdf, 0xff, 0xff, 0x80, 0x3e, 
0x00, 0x03, 0xff, 0xff, 0xff, 0x9f, 0xff, 0xff, 0xf7, 0xff, 0xff, 0xbf, 0xff, 0xfe, 0x00, 0x1c, 
0x00, 0x03, 0xff, 0xff, 0xff, 0x9f, 0xff, 0xff, 0xf7, 0xff, 0xff, 0x7f, 0x7f, 0xfe, 0x00, 0x00, 
0x00, 0x07, 0xff, 0xff, 0xff, 0x1f, 0xff, 0xff, 0xf7, 0xff, 0xf8, 0xff, 0x3f, 0xfc, 0x00, 0x00, 
0x00, 0x07, 0xff, 0xff, 0xff, 0x7f, 0xff, 0xff, 0xf7, 0xff, 0xe7, 0x7e, 0x0f, 0xfc, 0x00, 0x00, 
0x00, 0x1f, 0xff, 0xff, 0xff, 0x7f, 0xff, 0xff, 0xf7, 0xff, 0xcf, 0x80, 0x07, 0xfc, 0x00, 0x00, 
0x00, 0x7f, 0x9f, 0xff, 0xfe, 0x7f, 0xff, 0xff, 0xf7, 0xfc, 0x3f, 0xe0, 0x07, 0xfc, 0x00, 0x00, 
0x00, 0x7e, 0x37, 0xff, 0xfe, 0xff, 0xff, 0xff, 0xcf, 0xe2, 0x7f, 0x80, 0x07, 0xfc, 0x00, 0x00, 
0x00, 0xfe, 0x7e, 0x1f, 0xfd, 0xff, 0xff, 0xff, 0xb8, 0x1d, 0xfe, 0x00, 0x0f, 0xfc, 0x00, 0x00, 
0x00, 0xfe, 0x3f, 0xdf, 0xf9, 0xff, 0xff, 0xff, 0x77, 0xfb, 0xf8, 0x00, 0x0f, 0xf8, 0x00, 0x00, 
0x00, 0x7f, 0xdf, 0xef, 0xf3, 0xff, 0xff, 0xfe, 0xff, 0xf7, 0xe0, 0x00, 0x0f, 0xf8, 0x00, 0x00, 
0x00, 0x7f, 0xfe, 0x6f, 0xc7, 0xff, 0xff, 0xf0, 0x7f, 0xef, 0xc0, 0x00, 0x0f, 0xf0, 0x00, 0x00, 
0x00, 0x7f, 0xf9, 0xef, 0x8f, 0xff, 0xff, 0xe0, 0x3f, 0xee, 0x00, 0x00, 0x0f, 0xe0, 0x00, 0x00, 
0x00, 0x0f, 0x87, 0xee, 0x7d, 0xff, 0xff, 0xc0, 0x0f, 0x9c, 0x00, 0x00, 0x3f, 0x80, 0x00, 0x00, 
0x00, 0x0f, 0xff, 0x00, 0xfe, 0xff, 0xff, 0x80, 0x7f, 0x7c, 0x00, 0x00, 0x3f, 0x80, 0x00, 0x00, 
0x00, 0x68, 0x3e, 0x00, 0xff, 0x7f, 0xff, 0x01, 0xff, 0xf8, 0x00, 0x00, 0x7f, 0x00, 0x00, 0x00, 
0x00, 0xf7, 0xf8, 0x00, 0xff, 0x9f, 0xfe, 0x01, 0xff, 0xe0, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 
0x01, 0xfb, 0xe0, 0x00, 0x7f, 0x1f, 0xf0, 0x03, 0xff, 0xe0, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 
0x01, 0xfd, 0x80, 0x00, 0x00, 0xff, 0xe0, 0x03, 0xff, 0xe0, 0x00, 0x01, 0xf3, 0x00, 0x00, 0x00, 
0x06, 0x7f, 0x80, 0x00, 0x03, 0xff, 0xc0, 0x03, 0xff, 0xe0, 0x00, 0x03, 0xfd, 0x00, 0x00, 0x00, 
0x1f, 0x1f, 0x80, 0x00, 0x07, 0xff, 0xc0, 0x00, 0x7f, 0x00, 0x00, 0x0f, 0xfe, 0x00, 0x00, 0x00, 
0x3f, 0xee, 0x00, 0x00, 0x07, 0xff, 0x80, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xfe, 0x00, 0x00, 0x00, 
0x3f, 0xf0, 0x00, 0x00, 0x0b, 0xff, 0x80, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xff, 0x00, 0x00, 0x00, 
0x7f, 0xf8, 0x00, 0x00, 0x7c, 0xff, 0x80, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xff, 0x00, 0x00, 0x00, 
0x7f, 0xf8, 0x00, 0x00, 0xff, 0x1e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xff, 0x00, 0x00, 0x00, 
0x7f, 0xf8, 0x00, 0x01, 0xff, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xfc, 0x00, 0x00, 0x00, 
0x03, 0x80, 0x00, 0x03, 0xff, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x03, 0xff, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x03, 0xff, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x03, 0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
 
};
 
void setup()   {                
 
  display.begin(SSD1306_SWITCHCAPVCC, 0x3C);  // //Inicializa pantalla con en la dirección 0x3D para la conexión I2C.
 
}
 
void loop() {
 
//PUNTOS EN LAS CUATRO ESQUINAS DE LA PANTALLA
 
  display.fillScreen(0);         //Limpiamos la pantalla
 
  display.drawPixel(0,0,1);      //Esquina superior izquierda
  display.drawPixel(127,0,1);    //Esquina superior derecha
  display.drawPixel(0,63,1);     //Esquina inferior izquierda
  display.drawPixel(127,63,1);   //Esquina inferior derecha
 
  display.display();             //Refrescamos la pantalla para visualizarlos
  delay(4000);    
 
//LÍNEAS CRUZADAS DE ESQUINA A ESQUINA
 
  display.fillScreen(0);         //Limpiamos la pantalla
 
  display.drawLine(0,0,127,63,1);
  display.drawLine(0,display.height()-1,display.width()-1,0,1);
 
  display.display();             //Refrescamos la pantalla para visulizarlas
  delay(4000);   
 
//TRIÁNGULO Y TRIÁNGULO RELLENO
 
  display.fillScreen(0);         //Limpiamos la pantalla
 
  display.drawTriangle(0,0,127,0,64,32,1);
  display.fillTriangle(0,display.height()-1,display.width()-1,display.height()-1,display.width()/2,display.height()/2,1);
 
  display.display();             //Refrescamos la pantalla para visualizarlos
  delay(4000);  
 
 //RECTÁNGULO Y RECTÁNGULO RELLENO
 
  display.fillScreen(0);         //Limpiamos la pantalla
 
  display.drawRect(0,0,127,31,1);
  display.fillRect(0,display.height()/2+1,display.width()-1,display.height()/2-1,1);
 
  display.display();             //Refrescamos la pantalla para visualizarlos
  delay(4000);  
 
//RECTÁNGULO REDONDEADO Y RECTÁNGULO REDONDEADO RELLENO
 
  display.fillScreen(0);         //Limpiamos la pantalla
 
  display.drawRoundRect(0,0,127,31,10,1);
  display.fillRoundRect(0,display.height()/2+1,display.width()-1,display.height()/2-1,10,1);
 
  display.display();             //Refrescamos la pantalla para visualizarlos
  delay(4000);  
 
//CÍRCULO Y CÍRCULO RELLENO
 
  display.fillScreen(0);        //Limpiamos la pantalla
 
  display.drawCircle(32,32,30,1);
  display.fillCircle(display.width()*3/4,display.height()/2,30,1);
 
  display.display();             //Refrescamos la pantalla para visualizarlos
  delay(4000);  
 
//CARÁCTERES CON FUENTE PREDETERMINADA
 
  display.fillScreen(0);         //Limpiamos la pantalla
 
  display.setFont();             //Fuente por defecto -si no la hemos cambiado no es necesario seleccionarla
 
  display.drawChar(8,0,'a',1,0,8);  //Tamaños de 1 a 8. Los tamaños típicos son 1, 2 o 4
 
  char caracter1 = 'd';
  display.drawChar(65,0,caracter1,0,1,8);
 
  display.display();             //Refrescamos la pantalla para visualizarlos
  delay(4000);    
 
//TEXTO CON FUENTE PREDETERMINADA
 
  display.fillScreen(0);         //Limpiamos la pantalla
 
  display.setFont();             //Fuente por defecto -si no la hemos cambiado no es necesario seleccionarla
 
  display.setTextSize(1);        
  display.setTextColor(1,0);
  display.setCursor(0,0);
  display.println("AaBbCcDdEeFfGgHhIiJjK");
  display.setTextSize(2);
  display.print("AaBbCcDdEe");
 
  display.setTextSize(3);
  display.setTextColor(0,1);     //Color invertido
  display.setCursor(0,32);
  display.print("AaBbCcD");
  display.display();             //Refrescamos la pantalla para visualizarlo
  delay(4000);    
 
//GIRO DE PANTALLA -La coordenada (0,0) siempre queda en la esquina superior izquierda
 
  //display.setRotation(0);  //0 grados -posición inicial-
  //display.setRotation(1);  //90 grados en el sentido de las agujas del reloj
  //display.setRotation(2);  //180 grados en el sentido de las agujas del reloj 
  display.setRotation(3);  //270 grados en el sentido de las agujas del reloj
 
//CARÁCTER CON FUENTE ALTERNATIVA
 
  display.fillScreen(0);         //Limpiamos la pantalla
 
  display.setFont(&FreeMonoBoldOblique12pt7b);     //Fuente FreeSansBoldOblique12pt7b
 
  display.drawChar(0,85,'A',1,0,4);                
 
  display.display();             //Refrescamos la pantalla para visualizarlo
  delay(4000);   
 
//TEXTO CON FUENTES ALTERNATIVAS
 
  display.fillScreen(0);         //Limpiamos la pantalla
 
  display.setFont(&FreeMonoBoldOblique12pt7b);     //Fuente FreeMonoBoldOblique12pt7b
  display.setTextSize(1);
  display.setTextColor(1);
  display.setCursor(0,20);                         
  display.println("AaBb");
  display.setTextSize(2);
  display.setCursor(0,53);                         
  display.println("Aa");
 
  display.setFont(&FreeSansBoldOblique12pt7b);     //Fuente FreeSansBoldOblique12pt7b
  display.setTextSize(1);
  display.setTextColor(1);     
  display.setCursor(0,85);
  display.println("AaBb");
  display.setTextSize(2);
  display.setCursor(0,127);
  display.println("Aa");
 
  display.display();             //Refrescamos la pantalla para visualizarlos  
  delay(4000);  
 
//GIRO DE PANTALLA A LA POSICIÓN INICIAL
 
  display.setRotation(0);
 
//IMAGEN (TORO)
 
  display.fillScreen(0);          //Limpiamos la pantalla
  display.drawBitmap(0,0,Toro,128,64,1);
  display.display();             //Refrescamos la pantalla para visualizarla
  delay(4000);    
 
 }
